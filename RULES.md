项目开发规则

概述
- 目的：定义代码规范、构建、测试、提交和发布等常规规则，确保团队协作的可预测性和代码质量。
- 范围：涵盖后端 Java 项目、Hadoop 相关组件、测试与文档。

1. 编码风格
- 语言与版本：Java 17（基于 pom.xml 的配置），遵循 Java 的官方编码规范。
- 缩进与行长：4 空格缩进，行长不超过 120 字符。
- 命名：
  - 类名：PascalCase
  - 方法名/变量名：camelCase
  - 常量名：UPPER_SNAKE_CASE
- 导入：标准库 → 第三方库 → 项目内部；避免通配符导入。
- Lombok：尽量使用 @Getter，必要时使用 @Setter；尽量避免滥用 Lombok。
- 注释：公共 API 使用 Javadoc；复杂逻辑提供必要注释。
- Hadoop 相关：Text vs String 的使用；Config 在 Hadoop 配置对象中传递。

2. 构建与依赖
- 构建工具：Maven，使用 pom.xml；统一版本策略。
- 依赖版本：锁定在 pom.xml 中定义的版本，避免直接引用环境中未控版本。
- 构建命令：mvn clean compile, mvn test, mvn package。

3. 测试规范
- 使用 JUnit 4.x 与 Mockito 4.x；测试命名要表达意图。
- 临时资源：使用 JUnit TemporaryFolder。
- 测试覆盖率：核心逻辑覆盖，避免 flaky 测试。

4. 提交与代码审查
- 提交信息应包含“为什么”而不仅是“做了什么”。
- PR 要点：单一变更点、清晰的复现步骤、必要的回归测试。
- 遵守 CHANGE_POLICY.md 的变更策略与安全约束。

5. 日志与异常
- 使用 SLF4J 记录日志，提供上下文信息；错误信息要含有关键上下文。

6. 安全与合规
- 避免在代码中硬编码凭证，使用配置化和环境变量。
- 审核点：对涉及凭证、访问控制、网络权限的改动额外审查。

7. 变更与版本记录
 - 维护 CHANGELOG；必要时提供回滚方案。

 参考
 - 参考现有的 CHANGE_POLICY.md、AGENTS.md 以保持一致性。

## 关系导航
- CHANGE_POLICY.md：治理变更的高层规则与入口导航，请查看 CHANGE_POLICY.md。
- RULES.md：开发规范与模板，请查看 RULES.md。
- AGENTS.md：代理行为边界与使用规范，请查看 AGENTS.md。
- 快速导航：CHANGE_POLICY.md、RULES.md、AGENTS.md。

8. 代码结构与模块化
- 目标：保持代码结构清晰、可导航、利于测试与重用。
- 8.1 目录结构
  - 源码放在 src/main/java/，测试放在 src/test/java/，资源放在 src/main/resources/（如有）。
- 8.2 模块化建议
  - 如有较大子系统，考虑拆分为子模块（Maven 模块或独立包），明确模块职责与 API 边界。

9. 本地开发环境
- 9.1 运行环境
  - Java 17，Maven 3.x（遵循 pom.xml 的版本声明）。
- 9.2 本地运行与调试
  - 使用 mvn test 测试，mvn package 打包，尽量在本地环境 replicable 的条件下运行。

10. 版本控制与分支策略
- 10.1 分支命名
  - feat/ 功能分支，bugfix/ 修复分支，chore/ 维护/清理分支，docs/ 文档分支，release/ 发布分支。
 - 10.2 提交信息规范
   - type(scope): 短标题
   - 说明性正文，解释为何这样改动，包含回归测试、影响范围、以及可能的回滚信息。
- 10.3 合并与审查
  - 使用 Pull Request/合并请求；确保通过必要的测试与静态分析。

11. 持续集成与持续交付
- 11.1 流水线
  - 代码构建、测试、静态分析、打包，确保在 CI 中通过。
- 11.2 静态分析与安全检查
  - 集成 Checkstyle/PMD/SpotBugs；秘密扫描（如 SonarQube）等。

12. 测试策略
- 12.1 测试类型
  - 单元测试、集成测试、端到端测试（如有必要）。
- 12.2 覆盖率与数据
  - 设定合理的最低覆盖率目标，使用可重复的测试数据和随机种子（seed）以减少 flaky。
- 12.3 测试数据
  - 使用临时资源与隔离数据，避免对实际环境的污染。

13. 性能与可观测性
- 13.1 基准与性能测试
  - 为关键路径添加基准测试与性能回归检查。
- 13.2 日志与监控
  - 统一日志格式，足够的上下文信息，记录关键事件的耗时与错误信息。

14. 安全性与合规
- 14.1 机密信息
  - 避免硬编码凭证，使用环境变量/配置服务管理敏感信息。
- 14.2 安全审查
  - 对涉及认证、授权、网络访问的改动进行额外审查。

15. 文档与注释标准
- 15.1 文档
  - 代码注释、API 文档、开发者指南保持同步更新。
- 15.2 注释
  - 公共接口使用 Javadoc 风格，避免过度注释。

16. 变更与版本管理
- 16.1 CHANGELOG
  - 记录每次重要变更及回滚信息。
- 16.2 版本发布
  - 按语义化版本控制（semver）进行发布。

17. 术语表与缩略语
- 常用术语与缩略语及其定义，便于团队沟通。

18. 贡献者指南
- 新成员的快速上手要点、代码风格、提交流程、PR 要点。

 19. 模板

 - Commit Message 模板：
   - type(scope): subject
   - 说明改动的动机和范围（Why/What/How），便于历史追溯。

 - PR 模板：放置于 .github/PULL_REQUEST_TEMPLATE.md；包含摘要、变更点、影响范围、回归计划、测试情况、相关问题、回滚信息等。
 - Issue 模板：问题描述、重现步骤、期望行为、实际行为、环境信息。
